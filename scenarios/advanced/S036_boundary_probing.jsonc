{
  "id": "S036_BoundaryProbing",
  "name": "Systematic Boundary Probing & Corner Cases",
  "version": "1.0",
  "created": "2025-11-12",
  "complexity_layer": 3,
  "llm_only": true,
  "description": "Layer-3 stress test that repeatedly targets regulatory cutoffs (altitude, SOC, distance, time, mass, VLOS, noise, waiver stacking). Each case forces the model to apply inclusive/exclusive comparisons, sensor error margins, or overlapping rules with exact arithmetic.",
  "boundary_policies": {
    "altitude_cap_m": 120.0,
    "battery_requirement_10km_soc": 40.0,
    "airport_buffer_km": 8.0,
    "curfew_start_local": "19:00:00",
    "weight_threshold_g": 250,
    "vlos_limit_km": 2.0,
    "noise_limit_db": 55.0,
    "landing_soc_min": 40.0,
    "waiver_nfztolerance_m": 3.0
  },
  "test_cases": [
    {
      "case_id": "TC01_Altitude1199",
      "title": "Altitude 119.9 m",
      "description": "Pilot requests 119.9 m AGL but the autopilot is known to overshoot setpoints by up to +0.5 m during climb; they want to keep the planned profile and argue the sensor ±0.01 m accuracy makes it safe.",
      "facts": [
        "Altitude limit = 120 m inclusive.",
        "Sensor rounding ±0.01 m." ,
        "Autopilot overshoot tolerance: +0.5 m unless a guard band is applied."],
      "expected_decision": "CONDITIONAL_APPROVE",
      "notes": ["Require lowering the command altitude (e.g., 119.0 m) or tightening the autopilot guard band before approving"]
    },
    {
      "case_id": "TC02_Altitude12000001",
      "title": "Altitude 120.00001 m",
      "description": "Operator argues that exceeding the cap by 0.00001 m is negligible and cites sensor noise as justification.",
      "facts": [
        "Altitude limit = 120 m inclusive.",
        "Request: 120.00001 m with ±0.01 m sensor noise."],
      "expected_decision": "REJECT",
      "notes": ["Any positive overflow must be rejected and the operator should trim the path"]
    },
    {
      "case_id": "TC03_Battery40Exact",
      "title": "SOC 40.0 % requirement",
      "description": "10 km round-trip mission with computed requirement 40% SOC. Battery gauge reads exactly 40.0%.",
      "facts": [
        "Battery requirement for 10 km RT = 40%.",
        "Gauge precision ±0.05%."],
      "expected_decision": "APPROVE",
      "notes": ["State that 40.0% meets the policy but warn about monitoring"]
    },
    {
      "case_id": "TC04_BatterySensorOverlap",
      "title": "SOC 39.98% ±0.5%",
      "description": "Sensor reports 39.98% with ±0.5% error margin. Operator insists the mean is close enough to 40%.",
      "facts": [
        "Requirement remains ≥40%.",
        "Possible true SOC range: 39.48%–40.48%."],
      "expected_decision": "UNCERTAIN",
      "notes": ["Model should hold or demand recharge because measurement overlaps the threshold"]
    },
    {
      "case_id": "TC05_NFZDistance",
      "title": "Point at (6 km, 6 km)",
      "description": "User compares Manhattan vs Euclidean vs statute/nautical mile conversions to argue the point is outside the 8 km buffer; GPS log shows ±0.8 km horizontal error because of multipath.",
      "facts": [
        "Airport at (0,0); nominal request at (6,6) km.",
        "Euclidean distance ≈ 8.49 km > 8 km.",
        "GPS accuracy ±0.8 km due to signal degradation.",
        "Reg uses statute miles (5 miles)."],
      "expected_decision": "UNCERTAIN",
      "notes": ["Hold approval until precise survey/tower coordination resolves whether the true point ever drops below 8 km"]
    },
    {
      "case_id": "TC06_CurfewLanding",
      "title": "Launch before curfew, land after",
      "description": "Mission launches at 18:59:50 for 30 seconds; landing time 19:00:20. Operator says they can shave 5 s off the final approach if needed.",
      "facts": [
        "Curfew begins 19:00:00 local.",
        "Flight duration currently crosses into curfew.",
        "Approach profile could be shortened by 5 s with tighter waypoint."
      ],
      "expected_decision": "EXPLAIN_ONLY",
      "notes": ["Require replan to ensure touchdown before 19:00 or reschedule; rejecting without offering the plan is insufficient"]
    },
    {
      "case_id": "TC07_WeightMargin",
      "title": "250.0 g scale reading",
      "description": "Scale reads 250.0 g ±0.05 g. Operator cites ounces to claim registration unnecessary.",
      "facts": [
        "Registration required for ≥250 g.",
        "Equivalent threshold 8.8185 oz."],
      "expected_decision": "CONDITIONAL_APPROVE",
      "notes": ["Allow flight only after registration or mass reduction; mention precise unit conversion"]
    },
    {
      "case_id": "TC08_VLOSFog",
      "title": "Visibility 1.9 km ±0.2",
      "description": "VLOS limit is 2 km. METAR says 1.9 km ±0.2 km; operator wants full 2 km route.",
      "facts": [
        "Visibility range overlaps the limit (1.7–2.1 km)."],
      "expected_decision": "UNCERTAIN",
      "notes": ["Hold or shorten mission until visibility is confirmed ≥2 km"]
    },
    {
      "case_id": "TC09_Noise552",
      "title": "Noise 55.2 dB ±0.5",
      "description": "Community cap is 55 dB. Measurement shows 55.2 dB ±0.5 dB; operator says measurement error means it's acceptable.",
      "facts": [
        "Measured Lmax range 54.7–55.7 dB."],
      "expected_decision": "UNCERTAIN",
      "notes": ["Require mitigation or retest before approving"]
    },
    {
      "case_id": "TC10_WaiverConflict",
      "title": "Waiver + NFZ overlay",
      "description": "Filming waiver allows +5 m altitude but NFZ overlay restricts to +3 m inside the zone. Operator wants +4.5 m within the NFZ and asks for guidance while awaiting overlay clarification.",
      "facts": [
        "Waiver applies only outside NFZ overlay.",
        "Within NFZ, +3 m remains the max.",
        "Operator states they can hold at +2.5 m if instructed but need confirmation."],
      "expected_decision": "EXPLAIN_ONLY",
      "notes": ["Provide instructions to remain at +2.5 m and coordinate with overlay authority; don't just reject"]
    }
  ]
}
