{
  "scenario": "S020_ApprovalTimeline",
  "scenario_type": "timeline",
  "timestamp": "2025-11-01T16:45:13.606575",
  "summary": {
    "total_test_cases": 4,
    "llm_accuracy": "4/4",
    "llm_accuracy_percent": "100.0%"
  },
  "results": [
    {
      "test_case_id": "TC1_ApprovalTooLate",
      "description": "申请时间过晚：距离飞行仅6小时，未满足36小时要求",
      "command": "",
      "ground_truth": {
        "decision": "REJECT"
      },
      "llm_result": {
        "decision": "REJECT",
        "reasoning": "The flight application does not meet the 36.0-hour advance notice requirement. The application was submitted only 6.0 hours before the planned flight time, and no exemptions apply, thus failing the compliance check.",
        "analysis": {
          "decision": "REJECT",
          "reasoning": "The flight application does not meet the 36.0-hour advance notice requirement. The application was submitted only 6.0 hours before the planned flight time, and no exemptions apply, thus failing the compliance check.",
          "detailed_steps": [
            "Step 1: Checking for exemptions. The target altitude is 50.0m AGL (which is < 120m), but the flight is in a controlled zone (YES). Therefore, the uncontrolled airspace exemption does not apply (condition: altitude < 120m AND in_controlled_zone = False). The flight type is 'normal', so the emergency mission exemption does not apply (condition: flight_type = 'emergency').",
            "Step 2: Parsing ISO 8601 timestamps. Application time parsed as 2024-10-21T09:00:00Z. Planned flight time parsed as 2024-10-21T15:00:00Z.",
            "Step 3: Calculating time difference. Planned flight time (2024-10-21 15:00:00Z) minus Application time (2024-10-21 09:00:00Z) results in a difference of 6.0 hours.",
            "Step 4: Checking timeline requirement. The calculated time difference of 6.0 hours is NOT greater than or equal to the required 36.0 hours (6.0h < 36.0h). Therefore, the timeline requirement is not met.",
            "Step 5: Determining if approval is required. The flight is in a controlled zone (YES), meaning regulatory approval is required, and the advance notice timeline check is applicable.",
            "Step 6: Final decision. Since no exemptions apply and the timeline requirement is not met, the application is REJECTED."
          ],
          "timeline_analysis": {
            "application_time": "2024-10-21T09:00:00Z",
            "planned_flight_time": "2024-10-21T15:00:00Z",
            "time_difference_hours": 6.0,
            "required_hours": 36.0,
            "timeline_compliant": false,
            "flight_type": "normal",
            "emergency_exemption": false,
            "uncontrolled_airspace_exemption": false,
            "in_controlled_zone": true,
            "requires_approval": true
          }
        },
        "correct": true
      }
    },
    {
      "test_case_id": "TC2_ApprovalOnTime",
      "description": "按时提前申请：提前52小时申请，满足要求；边界测试：恰好36小时",
      "command": "",
      "ground_truth": {
        "decision": "APPROVE"
      },
      "llm_result": {
        "decision": "APPROVE",
        "reasoning": "The flight is in a controlled zone and requires regulatory approval. No exemptions applied. The application was submitted exactly 36.0 hours in advance, which meets the minimum required advance notice of 36.0 hours, making it compliant.",
        "analysis": {
          "decision": "APPROVE",
          "reasoning": "The flight is in a controlled zone and requires regulatory approval. No exemptions applied. The application was submitted exactly 36.0 hours in advance, which meets the minimum required advance notice of 36.0 hours, making it compliant.",
          "detailed_steps": [
            "Step 1: Checked for Uncontrolled Airspace Exemption. The altitude (50.0m) is less than 120m, but the flight is specified to be 'in controlled zone: YES'. Therefore, this exemption does not apply.",
            "Step 2: Checked for Emergency Mission Exemption. The flight type is 'normal', not 'emergency'. Therefore, this exemption does not apply.",
            "Step 3: Parsed application time as 2024-10-22T00:00:00Z and planned flight time as 2024-10-23T12:00:00Z.",
            "Step 4: Calculated the time difference between planned flight time and application time: 2024-10-23T12:00:00Z - 2024-10-22T00:00:00Z = 36.0 hours.",
            "Step 5: Checked timeline requirement. The calculated time difference (36.0 hours) is greater than or equal to the required advance notice (36.0 hours). Thus, the timeline is compliant.",
            "Step 6: Checked zone requirement. The flight is explicitly stated to be 'in controlled zone: YES', which means approval is required and the timeline compliance check is applicable.",
            "Step 7: Made final decision. Since no exemptions applied, but the timeline requirement was met, the decision is APPROVE."
          ],
          "timeline_analysis": {
            "application_time": "2024-10-22T00:00:00Z",
            "planned_flight_time": "2024-10-23T12:00:00Z",
            "time_difference_hours": 36.0,
            "required_hours": 36.0,
            "timeline_compliant": true,
            "flight_type": "normal",
            "emergency_exemption": false,
            "uncontrolled_airspace_exemption": false,
            "in_controlled_zone": true,
            "requires_approval": true
          }
        },
        "correct": true
      }
    },
    {
      "test_case_id": "TC3_EmergencyExemption",
      "description": "紧急任务豁免：30分钟后起飞的紧急救援任务",
      "command": "",
      "ground_truth": {
        "decision": "APPROVE"
      },
      "llm_result": {
        "decision": "APPROVE",
        "reasoning": "The flight application is approved because it is classified as an 'emergency mission', which is explicitly exempted from the standard advance notice timeline requirements according to China's 《条例》第31条.",
        "analysis": {
          "decision": "APPROVE",
          "reasoning": "The flight application is approved because it is classified as an 'emergency mission', which is explicitly exempted from the standard advance notice timeline requirements according to China's 《条例》第31条.",
          "detailed_steps": [
            "Step 1: Checking for uncontrolled airspace exemption. The target altitude is 50.0m (<120m), but the flight is specified as being 'in controlled zone = YES'. Therefore, the uncontrolled airspace exemption does not apply.",
            "Step 2: Checking for emergency mission exemption. The flight type is specified as 'emergency'. According to China's 《条例》第31条, emergency missions are exempt from timeline requirements. This exemption applies.",
            "Step 3: Since an emergency mission exemption applies, the flight application is approved, and the standard timeline requirement check is waived for the decision.",
            "Step 4: (For completeness) Parsing ISO 8601 timestamps: Application time is 2024-10-20T10:00:00Z, Planned flight time is 2024-10-20T10:30:00Z.",
            "Step 5: (For completeness) Calculating time difference: The difference between planned flight time and application time is 30 minutes (0.5 hours).",
            "Step 6: (For completeness) Checking timeline requirement: 0.5 hours is not ≥ 36.0 hours, so if the exemption did not apply, the timeline would not be met. However, the exemption supersedes this."
          ],
          "timeline_analysis": {
            "application_time": "2024-10-20T10:00:00Z",
            "planned_flight_time": "2024-10-20T10:30:00Z",
            "time_difference_hours": 0.5,
            "required_hours": 36.0,
            "timeline_compliant": false,
            "flight_type": "emergency",
            "emergency_exemption": true,
            "uncontrolled_airspace_exemption": false,
            "in_controlled_zone": true,
            "requires_approval": true
          }
        },
        "correct": true
      }
    },
    {
      "test_case_id": "TC4_UncontrolledAirspaceExempt",
      "description": "适飞空域免申请：低空（<120m）非管制区域，无需提前申请",
      "command": "",
      "ground_truth": {
        "decision": "APPROVE"
      },
      "llm_result": {
        "decision": "APPROVE",
        "reasoning": "The flight is exempt from advance notice requirements under the uncontrolled airspace exemption. It involves a drone flying at 50.0m AGL (which is less than 120m) and is explicitly stated to be outside a controlled zone. Therefore, no regulatory approval is required, making the timeline check not applicable.",
        "analysis": {
          "decision": "APPROVE",
          "reasoning": "The flight is exempt from advance notice requirements under the uncontrolled airspace exemption. It involves a drone flying at 50.0m AGL (which is less than 120m) and is explicitly stated to be outside a controlled zone. Therefore, no regulatory approval is required, making the timeline check not applicable.",
          "detailed_steps": [
            "Step 1: Exemption check - Uncontrolled airspace exemption. The target altitude is 50.0m AGL, which is < 120m. The flight is also NOT in a controlled zone. Both conditions for the uncontrolled airspace exemption are met.",
            "Step 2: Exemption check - Emergency mission exemption. The flight type is 'normal', not 'emergency', so this exemption does not apply.",
            "Step 3: Since the uncontrolled airspace exemption applies (altitude < 120m AND in_controlled_zone = False), the flight does not require regulatory approval. Consequently, the advance notice timeline requirement is not applicable.",
            "Step 4: No time parsing or calculation is needed as the flight is exempt.",
            "Step 5: Final decision is APPROVE due to the uncontrolled airspace exemption."
          ],
          "timeline_analysis": {
            "application_time": "None",
            "planned_flight_time": "2024-10-20T10:30:00Z",
            "time_difference_hours": null,
            "required_hours": 36.0,
            "timeline_compliant": null,
            "flight_type": "normal",
            "emergency_exemption": false,
            "uncontrolled_airspace_exemption": true,
            "in_controlled_zone": false,
            "requires_approval": false
          }
        },
        "correct": true
      }
    }
  ]
}